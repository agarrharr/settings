#!/bin/bash

# http://blog.rongarret.info/2015/08/psa-beware-of-sudo-on-os-x.html

LINE='Defaults tty_tickets'

if [ -z "$1" ]; then
  echo "Starting up visudo with this script as first parameter"
  export EDITOR=$0 && sudo -E visudo
else
  echo "Changing sudoers"
  OUTPUT="$(grep -q "$LINE" "$1" || echo "$LINE")"
  echo $OUTPUT
  if [ "$OUTPUT" == "$LINE" ]; then
    echo $OUTPUT >> $1
  fi
fi
